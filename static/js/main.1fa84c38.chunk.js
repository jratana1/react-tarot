(this["webpackJsonpreact-tarot"]=this["webpackJsonpreact-tarot"]||[]).push([[0],{40:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),s=n.n(c),i=(n(40),n(9)),o=n(6),d=n(17),u=n(34),l=n.p+"static/media/tarotBack.2deb9d18.png",j=n(1);function p(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(0),o=Object(i.a)(s,2),u=(o[0],o[1],Object(d.c)({opacity:e.flipped?1:0,transform:"perspective(600px) rotateY(".concat(e.flipped?180:0,"deg)"),config:{mass:5,tension:400,friction:80}})),p=u.transform,b=u.opacity;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{children:"im here"}),Object(j.jsx)(d.a.div,{className:"Card-Back",style:{backgroundImage:"url(".concat(e.reading?"".concat(l):e.props.image,")"),opacity:b.interpolate((function(e){return 1-e})),transform:p}}),Object(j.jsx)(d.a.div,{className:"Card-Front",style:{opacity:b,transform:p.interpolate((function(e){return"".concat(e," rotateY(180deg)")})),backgroundImage:"url(".concat(e.reading?e.props.image:null,")")},onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},children:e.reading&&r?Object(j.jsxs)("div",{className:"Card-Reading-Text",style:{backgroundColor:"rgba(63, 105, 86, 0.7)",fontWeight:"bold"},children:[Object(j.jsx)("h2",{className:"Card-Name",children:e.props.name}),Object(j.jsxs)("p",{className:"Card-Upright",children:["Upright: ",e.props.upright]}),Object(j.jsxs)("p",{className:"Card-Reverse",children:["Reversed: ",e.props.reversed]}),Object(j.jsx)("p",{className:"Card-Meaning",children:e.props.summary})]}):e.reading?null:Object(j.jsxs)("div",{className:"Card-Text",children:[Object(j.jsx)("h2",{className:"Card-Name",children:e.props.name}),Object(j.jsxs)("p",{className:"Card-Upright",children:["Upright: ",e.props.upright]}),Object(j.jsxs)("p",{className:"Card-Reverse",children:["Reversed: ",e.props.reversed]}),Object(j.jsx)("p",{className:"Card-Meaning",children:e.props.summary})]})})]})}var b=n(5);function h(e){var t=Object(b.d)((function(e){return e.readings.current})),n=Object(b.d)((function(e){return e.readings.counter})),r=Object(b.d)((function(e){return e.readings.flag})),c=Object(b.d)((function(e){return e.readings.readings})),s=Object(b.c)(),l=Object(a.useState)(!1),h=Object(i.a)(l,2),O=h[0],f=h[1],m=Object(d.c)((function(){return{pos:[0,0],config:{mass:2,tension:100,friction:50}}})),g=Object(i.a)(m,2),v=g[0].pos,x=g[1],y=Object(a.useState)(!1),C=Object(i.a)(y,2),N=C[0],S=C[1],E=Object(a.useState)(e.props.id),A=Object(i.a)(E,1)[0],R=Object(u.a)((function(e){var t=e.down,n=e.movement,a=e.tap;x({pos:n,immediate:t}),S(a)}),{initial:function(){return v.getValue()}},{filterTaps:!0});Object(a.useEffect)((function(){x({pos:[0,0]}),f(!1);var e=c.find((function(e){return e.id===t}));e&&(e.relationships.cards.data[0].id===A&&(x({pos:[300,-100]}),f(!0)),e.relationships.cards.data[1].id===A&&(x({pos:[600,-100]}),f(!0)),e.relationships.cards.data[2].id===A&&(x({pos:[900,-100]}),f(!0)))}),[t]),Object(a.useEffect)((function(){c.length>0&&(r&&(x({pos:[0,0]}),f(!1)),r&&c.slice(-1)[0].relationships.cards.data[0].id===A&&(x({pos:[300,-100]}),s({type:"SET_FLAG_FALSE"})),r&&c.slice(-1)[0].relationships.cards.data[1].id===A&&(x({pos:[600,-100]}),s({type:"SET_FLAG_FALSE"})),r&&c.slice(-1)[0].relationships.cards.data[2].id===A&&(x({pos:[900,-100]}),s({type:"SET_FLAG_FALSE"})))}),[r,c,A,x,s]);return Object(j.jsx)(d.a.div,Object(o.a)(Object(o.a)({id:"card-".concat(e.props.id),className:"Card-Reading-Container",onClick:function(e){return function(e){N&&f((function(e){return!e})),s({type:"INCREMENT"}),e.target.closest(".Card-Reading-Container").style.zIndex=n}(e)},onMouseDown:function(e){return function(e){s({type:"INCREMENT"}),e.target.closest(".Card-Reading-Container").style.zIndex=n}(e)}},R()),{},{style:{transform:Object(d.b)([v],(function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return"translate3d(".concat(n,"px,").concat(a,"px,0)")}))},children:Object(j.jsx)(p,{props:e.props.attributes,flipped:O,reading:!0,count:n})}))}var O=n(7),f=n(11),m=n(10),g=n(8);var v=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState({question:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var n=function(e,t){var n=new Array(t),a=e.length,r=new Array(a);if(t>a)throw new RangeError("getRandom: more elements taken than available");for(;t--;){var c=Math.floor(Math.random()*a);n[t]=e[c in r?r[c]:c],r[c]=--a in r?r[a]:a}return n}(e.props.cards,3).map((function(e){return e.id}));e.state.cards=n,e.state.flag=!0;var a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(sessionStorage.token)},body:JSON.stringify(e.state)};fetch("http://localhost:3000/api/v1/readings",a).then((function(e){return e.json()})).then((function(t){e.setState({question:""}),e.props.addReading(t)}))},e.state={question:""},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsxs)("form",{className:"question",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(j.jsxs)("p",{className:"Form-Input",children:[Object(j.jsx)("label",{children:"Ask A Question"}),Object(j.jsx)("textarea",{type:"text",onChange:this.handleChange,value:this.state.question})]}),Object(j.jsx)("input",{type:"submit"})]})}}]),n}(a.Component),x=Object(b.b)(null,(function(e){return{addReading:function(t){return e({type:"ADD_READING",payload:t})}}}))(v),y=n(18);function C(e){var t=e.cards.filter((function(t){return t.id===e.props.relationships.cards.data[0].id||t.id===e.props.relationships.cards.data[1].id||t.id===e.props.relationships.cards.data[2].id}));return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("li",{className:"list-item",id:e.props.id,children:[Object(j.jsx)("h2",{children:e.props.attributes.question}),Object(j.jsx)("div",{children:t[0].attributes.name}),Object(j.jsx)("div",{children:t[1].attributes.name}),Object(j.jsx)("div",{children:t[2].attributes.name})]})})}function N(e){var t=Object(b.d)((function(e){return e.readings.readings})),n=Object(b.c)(),r=t.slice(Math.max(t.length-5,0)).map((function(t){return Object(j.jsx)(C,{props:t,cards:e.cards},t.id)}));Object(a.useEffect)((function(){if(t.length>0){var e,n=document.getElementsByClassName("list-item"),a=Object(y.a)(n);try{for(a.s();!(e=a.n()).done;){e.value.style.backgroundColor=""}}catch(r){a.e(r)}finally{a.f()}document.getElementById(t.slice(-1)[0].id).style.backgroundColor="grey"}}));return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"Reading-List",onClick:function(e){return function(e){n({type:"CLICK_FLAG",payload:e.target.closest("li").id});var t,a=document.getElementsByClassName("list-item"),r=Object(y.a)(a);try{for(r.s();!(t=r.n()).done;)t.value.style.backgroundColor=""}catch(c){r.e(c)}finally{r.f()}e.target.closest("li").style.backgroundColor="grey"}(e)},children:Object(j.jsx)("ul",{children:r})})})}function S(e){var t=Object(b.c)();Object(a.useEffect)((function(){t((function(e){var t={method:"GET",headers:{Authorization:"Bearer ".concat(sessionStorage.token)}};fetch("http://localhost:3000/api/v1/readings",t).then((function(e){return e.json()})).then((function(t){e({type:"ADD_READINGS",payload:t})}))}))}),[t]);var n=Object(j.jsx)(j.Fragment,{});return e.cards&&(n=function(e){for(var t,n,a=e.length;0!==a;)n=Math.floor(Math.random()*a),t=e[a-=1],e[a]=e[n],e[n]=t;return e}(e.cards).map((function(e){return Object(j.jsx)(h,{props:e},e.id)}))),Object(j.jsxs)("div",{className:"Reading-Container",children:[n,Object(j.jsx)(x,{cards:e.cards}),Object(j.jsx)(N,{cards:e.cards})]})}var E=n(24),A=n(4),R=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).handleSubmit=function(t){t.preventDefault();var n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user:e.state})};fetch("http://localhost:3000/api/v1/users",n).then((function(e){return e.json()})).then((function(t){sessionStorage.setItem("token",t.jwt),e.setState({username:"",password:""})}))},e.handleChange=function(t){e.setState({username:t.target.value})},e.handlePasswordChange=function(t){e.setState({password:t.target.value})},e.state={username:"",password:""},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsx)("div",{className:"login-page",style:{width:"200px",height:"50vh",margin:"auto",marginTop:"10vh"},children:Object(j.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(j.jsxs)("p",{className:"Form-Input",children:[Object(j.jsx)("label",{children:"username"}),Object(j.jsx)("input",{type:"text",onChange:this.handleChange,value:this.state.username}),Object(j.jsx)("label",{children:"password"}),Object(j.jsx)("input",{type:"password",onChange:this.handlePasswordChange,value:this.state.password})]}),Object(j.jsx)("input",{type:"submit"})]})})}}]),n}(r.a.Component),I=Object(b.b)(null,(function(e){return{}}))(R),T=function(){return Object(j.jsx)("div",{className:"Header",children:Object(j.jsx)("h1",{className:"brand",children:Object(j.jsx)("i",{children:"Tarot Card Reader"})})})};function w(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(j.jsx)("div",{className:"Card-Container",onClick:function(){c((function(e){return!e}))},children:Object(j.jsx)(p,{props:e.props.attributes,flipped:r,image:e.props.attributes.image})})}function k(e){var t=Object(b.d)((function(e){return e.count.query}));e.props.filter((function(e){return e.attributes.name.includes(t)}));return Object(j.jsx)("div",{className:"Card-Index",children:e.props.map((function(e){return Object(j.jsx)(w,{props:e})}))})}var F=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).handleSubmit=function(t){t.preventDefault(),console.log(e.state),e.props.filter(e.state),e.setState({query:""})},e.handleChange=function(t){e.setState({query:t.target.value})},e.state={query:""},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this;return Object(j.jsx)("div",{className:"filter",style:{width:"200px",height:"75px",margin:"auto"},children:Object(j.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(j.jsxs)("p",{className:"Form-Input",children:[Object(j.jsx)("label",{children:"search"}),Object(j.jsx)("input",{type:"text",onChange:this.handleChange,value:this.state.query})]}),Object(j.jsx)("input",{type:"submit"})]})})}}]),n}(r.a.Component),L=Object(b.b)(null,(function(e){return{filter:function(t){return e(function(e){return{type:"FILTER",payload:e}}(t))}}}))(F);var D=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!0),s=Object(i.a)(c,2),o=s[0],d=s[1];return Object(a.useEffect)((function(){fetch("http://localhost:3000/api/v1/cards").then((function(e){return e.json()})).then((function(e){r(e.data),d(!1)}))}),[]),Object(j.jsx)(E.a,{basename:"/",children:Object(j.jsx)("div",{className:"App",children:o?Object(j.jsx)("div",{children:"Loading"}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{children:Object(j.jsxs)("ul",{className:"Navbar",children:[Object(j.jsx)("li",{className:"Nav-Item",children:Object(j.jsx)(E.b,{to:"/",children:"Home"})}),Object(j.jsx)("li",{className:"Nav-Item",children:Object(j.jsx)(E.b,{to:"/cards",children:"Cards"})}),Object(j.jsx)("li",{className:"Nav-Item",children:Object(j.jsx)(E.b,{to:"/readings",children:"Readings"})})]})}),Object(j.jsx)(T,{}),Object(j.jsx)(A.a,{exact:!0,path:"/",children:Object(j.jsx)(I,{})}),Object(j.jsxs)(A.a,{exact:!0,path:"/cards",children:[Object(j.jsx)(L,{}),Object(j.jsx)(k,{props:n})]}),Object(j.jsx)(A.a,{exact:!0,path:"/readings",children:Object(j.jsx)(S,{cards:n})})]})})})},M=n(15),_=n(35),q={counter:0,readings:[],flag:!1,current:""},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INCREMENT":return Object(o.a)(Object(o.a)({},e),{},{counter:e.counter+1});case"ADD_READING":return Object(o.a)(Object(o.a)({},e),{},{readings:t.payload.data,flag:!0});case"SET_FLAG":return Object(o.a)(Object(o.a)({},e),{},{flag:!e.flag});case"SET_FLAG_FALSE":return Object(o.a)(Object(o.a)({},e),{},{flag:!1});case"CLICK_FLAG":return Object(o.a)(Object(o.a)({},e),{},{current:t.payload});case"ADD_READINGS":return Object(o.a)(Object(o.a)({},e),{},{readings:t.payload.data,flag:!0});default:return Object(o.a)({},e)}};var B=Object(M.c)({readings:G,count:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{count:0,query:"all"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BUTTON_INCREMENT":return{count:e.count+1};case"DECREMENT":return e.count-1;case"FILTER":return Object(o.a)(Object(o.a)({},e),{},{query:t.payload.query});default:return e}}}),U=Object(M.e)(B,Object(M.d)(Object(M.a)(_.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(b.a,{store:U,children:Object(j.jsx)(D,{})})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.1fa84c38.chunk.js.map